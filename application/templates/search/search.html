
{% extends "base.html" %}
{% block title%}test search{% endblock %}
{% block content %}  
  <!-- <div>
    {%if data %}
    {% for d in data %}
      <ul> 
        <p> Title : {{d["title"]}}  </p>  
        <p> author : {{d["email"]}}  </p>  
        <p> Price : {{d["price"]}}  </p>  
        <p> description : {{d["description"]}} </p>
        <img  src={{url_for('static', filename=d["image"] ) }}   height="100px" width="100px"  />
      </ul>  
    {% endfor %}
    {% endif %}
  </div> -->
  <script>
    $(function() {
        $('.search-filter').keyup(function(){
            var min = $('#min').val();
            var max = $('#max').val();

            console.log("working")
        $.ajax({
            type: 'POST',
                url: 'filter?searchedData={{searchedData}}&category={{category}}&min='+min+'&max=' +max,
                dataType: 'json',
           });
        });
    });
    </script>

  <div class="container-fluid">
    <div class="row">
        <div class="col-2 px-1 bg-dark position-fixed" id="sticky-sidebar">
            <div class="nav flex-column flex-nowrap vh-100 overflow-auto text-white p-2" >
              <div class="search-filter">
                <form>
                <label>Min</label>
                <input type="number" class="form-control" name="min" id="min" placeholder="$0">
                <label>Max</label>
                <input type="number" class="form-control" name="max"  id="max"placeholder="$100">
                <label>Date posted</label>
                <input type="number" class="form-control" placeholder="mm/dd/yy">   
              </form>
              </div>
            </div>
        </div>
      </div>
        <div class="col-9 offset-2" id="main">

          <!-- card-deck start -->
          <div class="card-deck">
          {%if data %}
          {% for d in data %}
          
          <div class="col-xs-12 col-sm-8 col-md-6 col-lg-4">
            <!-- space between cards -->
            <div class="p-3 boder">
            <!-- individual card start-->
            <a  href="/posting/{{d['postid']}}">
            <div class="card bg-light text-center" style="width: 20rem;">
              <img class="card-img-top" src={{url_for('static', filename=d["image"] ) }} alt="Card image cap">
              <div class="card-header">{{d["title"]}}</div>
              <div class="card-body">
                <h5 class="card-title text-success">${{d["price"]}}</h5>
                <a href="#" class="btn btn-primary">Contact</a>                
                <p class="card-text"><small class="text-muted">Date Posted:</small></p>
              </div>
            </div> 
            </a>
            <!-- individual card end-->
            </div>
            <!-- card space end-->
          </div> 
                  
          
          {% endfor %}
          {% endif %}

        </div><!--card-deck end -->

        </div><!--main area end-->
    </div>
</div>


{% endblock %}